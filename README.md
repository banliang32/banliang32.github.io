
# 半两商品期货交易计算器软件 V1.0.0.0 用户手册 


<!-- TOC -->

- [半两商品期货交易计算器软件 V1.0.0.0 用户手册](#%E5%8D%8A%E4%B8%A4%E5%95%86%E5%93%81%E6%9C%9F%E8%B4%A7%E4%BA%A4%E6%98%93%E8%AE%A1%E7%AE%97%E5%99%A8%E8%BD%AF%E4%BB%B6-v1000-%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C)
    - [引言](#%E5%BC%95%E8%A8%80)
        - [编写目的](#%E7%BC%96%E5%86%99%E7%9B%AE%E7%9A%84)
        - [参考资料](#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99)
        - [术语和缩略词](#%E6%9C%AF%E8%AF%AD%E5%92%8C%E7%BC%A9%E7%95%A5%E8%AF%8D)
    - [软件概述](#%E8%BD%AF%E4%BB%B6%E6%A6%82%E8%BF%B0)
        - [软件功能](#%E8%BD%AF%E4%BB%B6%E5%8A%9F%E8%83%BD)
        - [软件运行](#%E8%BD%AF%E4%BB%B6%E8%BF%90%E8%A1%8C)
        - [系统要求](#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82)
    - [软件使用](#%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8)
        - [基本的交易计算流程](#%E5%9F%BA%E6%9C%AC%E7%9A%84%E4%BA%A4%E6%98%93%E8%AE%A1%E7%AE%97%E6%B5%81%E7%A8%8B)
        - [选择交易品种](#%E9%80%89%E6%8B%A9%E4%BA%A4%E6%98%93%E5%93%81%E7%A7%8D)
            - [鼠标点击【选】按钮](#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E9%80%89%E6%8C%89%E9%92%AE)
            - [在交易品种下拉框中输入品种拼音首字](#%E5%9C%A8%E4%BA%A4%E6%98%93%E5%93%81%E7%A7%8D%E4%B8%8B%E6%8B%89%E6%A1%86%E4%B8%AD%E8%BE%93%E5%85%A5%E5%93%81%E7%A7%8D%E6%8B%BC%E9%9F%B3%E9%A6%96%E5%AD%97)
            - [日盘与夜盘](#%E6%97%A5%E7%9B%98%E4%B8%8E%E5%A4%9C%E7%9B%98)
        - [交易计算](#%E4%BA%A4%E6%98%93%E8%AE%A1%E7%AE%97)
            - [（1）用户选择交易品种后，程序会将该品种的预设基础数据填充至程序对应的控件中](#1%E7%94%A8%E6%88%B7%E9%80%89%E6%8B%A9%E4%BA%A4%E6%98%93%E5%93%81%E7%A7%8D%E5%90%8E%E7%A8%8B%E5%BA%8F%E4%BC%9A%E5%B0%86%E8%AF%A5%E5%93%81%E7%A7%8D%E7%9A%84%E9%A2%84%E8%AE%BE%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E5%A1%AB%E5%85%85%E8%87%B3%E7%A8%8B%E5%BA%8F%E5%AF%B9%E5%BA%94%E7%9A%84%E6%8E%A7%E4%BB%B6%E4%B8%AD)
            - [（2）保证金限额与开仓口数，](#2%E4%BF%9D%E8%AF%81%E9%87%91%E9%99%90%E9%A2%9D%E4%B8%8E%E5%BC%80%E4%BB%93%E5%8F%A3%E6%95%B0)
            - [（3）【买】与【卖】按钮](#3%E4%B9%B0%E4%B8%8E%E5%8D%96%E6%8C%89%E9%92%AE)
        - [变更数据](#%E5%8F%98%E6%9B%B4%E6%95%B0%E6%8D%AE)
        - [定时提醒](#%E5%AE%9A%E6%97%B6%E6%8F%90%E9%86%92)
        - [锦鲤](#%E9%94%A6%E9%B2%A4)
        - [鼠标点击](#%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB)
        - [提示条件](#%E6%8F%90%E7%A4%BA%E6%9D%A1%E4%BB%B6)
        - [画预警线](#%E7%94%BB%E9%A2%84%E8%AD%A6%E7%BA%BF)
        - [操作记录](#%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95)
        - [捐赠](#%E6%8D%90%E8%B5%A0)
        - [帮助](#%E5%B8%AE%E5%8A%A9)
        - [软件常用的快捷键](#%E8%BD%AF%E4%BB%B6%E5%B8%B8%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE)

<!-- /TOC -->
## 1 引言
### 1.1 编写目的
- 在我自己的交易过程中，发现很多交易软件无法完成的功能，比如计算预期的交易成本，
交易利润、行情软件刷新慢，无法及时看到最及时的排名、经常因为其他工作错过最佳交易
时机等；为此，在几年前我就开始构思这个软件的底层逻辑了，比如这个软件一定要实现根
据基本参数来计算交易成本、利润、亏损等功能，从 2019 年动手写至今，已经过了快五年
时间，软件不但实现了最初的设计目标，同时也实现了：
- 计算预期的交易成本、盈亏
- 自动按用户设定的保证金限额来计算可下单口数
- 定时提醒（根据用户自己设置的提醒周期）
- 根据止损结算金额倒算盈利平仓价格（锦鲤功能）
- 交易思路提示功能
- 通过鼠标自动点击行情软件（赢顺 6）来触发行情软件及时更新排名功能
- 点击买或卖进行计算时，在行情软件（赢顺 6）上自动画警示线的功能
- 计算记录导出功能
- 最终的目的是让交易员在下单前就明确的知道可能的成本、亏损及盈利金额，并帮助交易
员解决一些交易中的痛点，让交易变得明明白白的
### 1.2 参考资料
- 《软件需求规格说明书》
- 《概要设计说明书》
- 《详细设计说明书》
### 1.3 术语和缩略词
- 交易品种 - 泛指各交易所的大宗商品期货以及中金所的金融期货
- 日盘交易品种 – 只能在日盘（09:00 - 15:00）交易的品种
- 夜盘交易品种 – 日盘与夜盘（21:00 - 02:30）都可以交易的品种
- 保证金限额 - 用户可以用来建仓的资金，不是本金，是本金的一部分【可自设】
- 多保证金比率 - 开多单的保证金比率，程序根据这个参数与参考保证金来计算多头开仓口数【可自设】
- 空保证金比率 - 开空单的保证金比率，程序根据这个参数与参考保证金来计算空头开仓口数【可自设】
- 开仓手续费 - 开仓时产生的手续费【可自设】
- 平仓手续费 - 平仓（T + 1）所产生的手续费【可自设】
- 平今手续费 - 平仓（T + 0）所产生的手续费【可自设】
- 最小开仓口数 - 每次交易的最小开仓口数，交易所规定，并由交易所根据实际情况调整的重要参数【可自设】
- 价格基数 - 期货合约所代表的商品数量
- 最小变动价位 - 合约标的物每单位价格报价允许的最小变动数值
- 参考价格 - 上一次计算时的计算价格
- 所需保证金 - 本次计算时所需要的保证金总额
- 参考保证金 - 上一次计算时计算出的所需保证金/每口
- 保证金止损比例 - 由用户自定义的每次交易时的止损比例，其基数来自于所需保证金
- 保本位 - 指本次交易用户在此位置平仓不会亏损本金的价格，这个价格考虑了手续费
- 等比止赢价位 - 止损价的反面，根据保证金止损比例来计算同比例赢利时的价格
- 双倍止赢价位 - 根据保证金止损比例来计算同比例赢利双倍时的价格
- 建仓价 - 以此价格来计算所有的相关结果，比如止损价、止损结算、手续费、止赢价等
- 止损价 - 根据建仓价与保证金止损比例为基础计算出来的主动止损价格
- 锦鲤 - 根据用户在止损结算中输入的金额来反算出平仓时的价位，只能输入正数来反算
- 开仓口数 - 由用户输入（在锁定状态下）或由保证金限额根据参考保证金计算出的开仓数量
- 止损结算 - 平仓时形成的亏损或赢利金额
- 画线预警 - 在点击买或卖进行计算时，自动在行情软件（赢顺 6）上画预警线

## 2 软件概述
### 2.1 软件功能
- 1）交易计算
- 2）更新数据
- 3）定时提醒
- 4）锦鲤
- 5）鼠标点击
- 6）提示条件
- 7）操作记录
- 8）画预警线
- 9）捐赠
- 10）帮助
### 2.2 软件运行
- 程序运行在 Windows 系统中。
### 2.3 系统要求
- Windows 2003 以上系统，内存 1GB 以上，硬盘 5 GB 以上。

## 3 软件使用 
### 3.1 基本的交易计算流程
- ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/TransactionFlowChart.png)
### 3.2 选择交易品种
- 用户在交易计算或者设置与品种相关的参数前，必须先选择交易品种
#### 3.2.1 鼠标点击【选】按钮
- 点击后，程序会弹出品种选择对话框供用户选择，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/SelectionofTradingVariety1.png)
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/SelectionofTradingVariety2.png)
- 基础版只能勾选其中一部分品种
- 选择品种后，关掉对话框，程序会将用户选择的品种添加至品种选择下拉框
中，同时程序会将这些品种写入注册表中，当用户下次打开程序时，程序会从注
册表中将这些品种取出后添加至品种选择下拉框中
- 这时，只需要点击品种下拉框右侧的三角箭头，就能看到所选品种，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/SelectionofTradingVariety3.png)
#### 3.2.2 在交易品种下拉框中输入品种拼音首字
- 只需输入前两个字的拼音字母首字，程序会自动将匹配的交易品种添加至品
种下拉框中，同时会清空品种下拉框中的其他交易品种
- 例如输入“fj”，程序就会将“沪金”添加至品种下拉框中，有的品种的拼
音首字母会重名，比如“cz”，程序会将“菜籽粕”与“菜籽油”写入至品种下
拉框中，这时只需要用户滚动鼠标滚轮就能选择自己需要的交易品种了
至此，程序并不会删除注册表中用户已经自选的品种，除非你点击了【选】
这个按钮，如下图：
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/SelectionofTradingVariety3.png)
#### 3.2.3 日盘与夜盘
- 用户选择交易品种后，程序会在【选】按钮旁边显示一个图标，用来表示该
品种是日盘还是夜盘，如下图
    - 夜盘交易品种
        - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/NightTradingVarieties1.png)
    - 日盘交易品种
        - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/DayTradingVarieties1.png)
    
### 3.3 交易计算
#### （1）用户选择交易品种后，程序会将该品种的预设基础数据填充至程序对应的控件中
- 其中：参考价格、参考保证金、保证金止损比例与建仓价是对最后一次计算数据的保留（程序会将这几个值写入到注册表中）
- 注意：手续费有两种状态
    - 状态一：固定手续费，每口收取固定金额手续费，如下图的沪金固定手续费
        - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/FixedHandlingFee.png)
    - 状态二：手续费率，根据百分比来收取手续费如下图沪铜的开仓手续费率、平仓手续费率与平今手续费率都是按百分比来收取的手续费
        - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/HandlingFeeRate.png)

- 注意：有些品种平仓手续费与平今手续费是不一样的，望周知
#### （2）保证金限额与开仓口数，
- 保证金限额是指由用户根据自己能动用多少账户余额用于下单，然后将这个金额设置为保证金限额，举个例子：小王当前账户余额为 200,000 元，小王设置的保证金限额为 30,000 元，沪铜当前的价格是 79830，其单口保证金为 67855 元，而小王设置的保证金限额为 30000 元，那就不够一口的最低保证金，程序无法计算的同时也会提示用户，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/MarginLimit1.png)
- 如果将保证金限额改为 75,000 元，需要点击【更新数据】后，程序才会将
保证金限额的值写入至注册表中。
- 此时，选择交易品种，程序就会自动计算开仓口数
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/MarginLimit2.png)
- 如果不想使用自动计算口数功能，可以点击开仓口数旁边的 锁 多选框按钮，程序会自动将开仓口数设置为 1 口，并且在用户选择交易品种时，不再自动计算开仓口数，如图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/MarginLimit3.png)    
#### （3）【买】与【卖】按钮
- 点击【买】或者【卖】按钮，程序会依据现有条件自动计算所需保证金、止损
价、保本位、等比止赢价位、双倍止赢价位与止损结算，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/BuyandSell1.png)
- 同时，也会更新参考价格、参考保证金与建仓价在注册表中的值，在程序下次
登录时，程序会自动加载这三个值
- 如果用户想反向计算，只需要在止损价输入框里输入价格，然后点击【买】或者【卖】按钮，程序就会按这个价格来计算止损结算，但程序不会改变保本位、等比止赢价位与双倍止赢价位的值，因为这三个值是根据保证金止损比例来计算
的，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/BuyandSell2.png)
半两商品期货交易计算器软件 v1.0 第 13 页 
### 3.4 变更数据
- 保证金限额可以通过变更数据来修改，其他基础数据中，多保证金比率、空保证金比率、开仓手续费、平仓手续费、平今手续费、最小开仓口数都需要用户自己填写，因为这六个参数会根据不同的交易品种，而各有不同（我自己是在文华财经赢顺 6 的交易窗口的合约表中查看的，交易窗口默认会选中用户正在查看的交易品种，其中就有以上前五个信息，其中最小开仓口数是由交易所根据行情的波动情况临时通知变更的），而修改这些数据，只需要将相关数据直接填写至对应的控件中，然后点【变更数据】按钮，程序就会将这六个参数的值写入至注册表中，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/ContractSheet.png)
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/ChangeData.png)

### 3.5 定时提醒
- 功能只能在交易时间内使用（日盘与夜盘）如果是基础版，定时提醒按钮的功能只有恢复默认输入法和隐藏程序的窗口
主界面，不会进行定时提醒服务
- 定时提醒功能是指程序会按照用户选择的时间周期来对用户进行提醒的功能，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/TimedReminder1.png)  
- 定时提醒会在时间周期快到时弹出提示框（会自动销毁）和气泡框（需要用户鼠标经过气泡弹窗时再销毁），同时还会发出提示音不同的时间周期提前提示的时间是不同的，周期越长，提前提醒的时间就越靠前，如下图：
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/TimedReminder2.png)
- 其中半小时和一小时两个时间周期是我根据文华财经赢顺 6 的 K 线周期来计算的，不一定符合其他交易软件连续功能，这个功能是在快要下单前，如果选择这个多选框，再点击定时提醒，程序会每分钟提醒一次，以避免错过宝贵的下单机会，如下图：
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/ContinuousAlert.png)
- 连续功能的热键，同时按下：Ctrl + Shift + T 也会让程序自动选择这个多选框
- 如果这个热键被其他程序占用，会导致操作失败
- 连续功能的提示音比起普通提示音要暴烈得多，多用于要下单之前提醒用户不要走神

### 3.6 锦鲤
- 在用户已经计算出当前交易品种【买】或【卖】结果的前提下用户在止损结算中输入预期赢利金额（只能输入 100 以上的正整数 ），然后随便在对话框的其他位置点击一下鼠标，程序就会倒算出止赢价，并将其写入到【锦鲤】输入框中，如图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/Koi.png)
- 锦鲤的结果未包含手续费
### 3.7 鼠标点击
- 用于及时更新用户感兴趣的板块排名，文华财经赢顺 6 的自动更新速度在 5 分钟左右，通过鼠标点击能更快的更新排名该功能仅在文华财经赢顺 6 上测试成功
- 用户使用热键（Ctrl + Shift + M）预先设置好点击的屏幕位置和鼠标点击间隔秒数
- 程序会按间隔秒数来点击预先设置的点击位
- 注意：如果文华财经赢顺 6 软件未处于顶部窗口，程序是不会发送鼠标点击命令的
- 通过热键（Ctrl + Shift + K）或者直接选择启用多选框来开启这个功能
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/AutoMouseClick1.png)
- 程序在发出鼠标点击后，还会发出一系列的热键，让行情窗口呈现出 4 个品种 K 线同
列的状态，如图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/ManySharesListedTogether.png)
- 只有完整版可以使用这个功能
### 3.8 提示条件
- 先点击捐赠按钮来展开主窗口，如图
    -![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/ExpandMainWindow.png)
- 在屏幕的右上角显示一个多个信号灯组成的窗口，可通过鼠标点击灯下的按钮来或直接点击条件多选框来改变信号灯的状态，红灯代表条件不成立，绿灯代表条件成立
- 可以预设最多 7 个条件，最少 3 个条件，可通过【设置条件】按钮来进行设置 7 个条件和提示窗口的透明度，如图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/SignalLight1.png)
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/SignalLight2.png)
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/SignalLight3.png)
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/SignalLight4.png)
- 在交易品种已经选择的前提下，也可以通过热键（Ctrl + Shift + J）来启动红绿灯窗口    
- **注意：上图只是示例，所有条件都是随意设置的，不要以这些条件来作为你自己的条件！！！**

### 3.9 画预警线
- 这个功能只能在文华财经赢顺 6 上使用！！！
- 使用前，必须先打开赢顺 6 行情窗口
- 在点击买或卖按钮前，需要先选中画预警线多选框按钮，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/DrawAnEarlyWarningLine1.png)
- 点击买或卖按钮后，请将手离开鼠标，程序将自动在赢顺 6 上开始画预警线
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/DrawAnEarlyWarningLine2.png)    

### 3.10 操作记录
- 程序会将用户把次计算的关键数据写入到一个列表控件中，方便用户查看程序提供了一个导出接口，方便用户将计算结果数据导出到一个 CSV 文件中，如图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/OperationRecord.png)
- 锦鲤功能的计算结果不会写入到操作记录中
- 双击某条记录可以从列表中删除该条记录

### 3.11 捐赠
- 程序接受捐赠，并提供了捐赠接口
- 捐赠后，用户可以通过接口来生成机器码，并将机器码和捐赠的渠道（微信或支付宝）与捐赠时间（精确到分）发送给软件开发者软件，如图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/Endowment.png)
- 开发者收到邮件后，会将授权日期（1 年）加入到机器码中生成授权码，以回复邮件的方式发送给用户用户收到授权码后，通过捐赠模块提供的接口（授权码）导入到注册表中，授权完成后，程序会自动重启
- 授权的用户将可以使用软件的完整版功能
### 3.12 帮助
- 程序提供文档帮助和视频演示两种帮助信息，用户只要点击帮助图标或在程序激活时按 F1 键就能打开帮助导航窗口，如下图
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/Help1.png)
    - ![](https://cdn.jsdelivr.net/gh/startMakingMoney/pic@main/img/Help2.png)

### 3.12 软件常用的快捷键
- Ctrl + Shift + O 显示程序主界面
- Ctrl + Shift + T 启用或关闭连续提醒功能
- Ctrl + Shift + J 显示或关闭条件提示窗口
- Ctrl + Shift + K（仅支持文华财经赢顺 6）开启鼠标点击功能
- Ctrl + Shift + M（仅支持文华财经赢顺 6）定位鼠标点击位置
- Ctrl + Shift + B（仅支持文华财经赢顺 6）只看 K 线的默认状态（就是涨向上，跌向下）默认状态不用激活，只有在当前状态为只看 K 线的反向状态时，才使用这个热键来将 K 线状态恢复成默认状态
- Ctrl + Shift + S（仅支持文华财经赢顺 6）只看 K 线的反向状态（就是涨向下，
跌向上）
